Task level native optimization, and c/c++ programming interface for hadoop mapreduce.

diskio 100M         0.1s
decompress 300M     0.3s
process    300M     0.6s
compress   200M     0.5s     Total 1.5s 

shuffle 100M * 4 /  3s           3s

decompress 1200M  1s
process    1200M  2s
compress   100M   0.25s    Total 3.25s

Perfect timing             Total 9.25s

9.25s 
1node 6map 6reduce 

300M(compressed):1000M(decompressed)/s pernode processing power
1000(sn)
1P 1000000sn/10000 100s

500 2s
100 10s
10 100s

[ RUN      ] Perf.LineRecordReader  use memchr for loop unroll by 2
11/12/11 01:52:25 INFO Record Length: 2 read speed byte/record time: 0.00152s size: 0.334M/0.095M speed: 220.32M/62.95M
11/12/11 01:52:25 INFO Record Length: 13 read speed byte/record time: 0.00184s size: 1.383M/0.095M speed: 751.95M/51.86M
11/12/11 01:52:25 INFO Record Length: 55 read speed byte/record time: 0.00449s size: 5.388M/0.095M speed: 1200.06M/21.24M
11/12/11 01:52:25 INFO Record Length: 100 read speed byte/record time: 0.00831s size: 9.680M/0.095M speed: 1164.56M/11.47M
11/12/11 01:52:26 INFO Record Length: 200 read speed byte/record time: 0.01463s size: 19.217M/0.095M speed: 1313.68M/6.52M
11/12/11 01:52:26 INFO Record Length: 400 read speed byte/record time: 0.02778s size: 38.290M/0.095M speed: 1378.38M/3.43M

[ RUN      ] Perf.LineRecordReader  use memchr for loop
11/12/11 01:41:12 INFO Record Length: 2 read speed byte/record time: 0.00158s size: 0.334M/0.095M speed: 211.66M/60.47M
11/12/11 01:41:13 INFO Record Length: 16 read speed byte/record time: 0.00329s size: 1.669M/0.095M speed: 506.97M/28.97M
11/12/11 01:41:13 INFO Record Length: 64 read speed byte/record time: 0.00725s size: 6.247M/0.095M speed: 861.60M/13.15M
11/12/11 01:41:13 INFO Record Length: 100 read speed byte/record time: 0.01010s size: 9.680M/0.095M speed: 958.49M/9.44M
11/12/11 01:41:13 INFO Record Length: 200 read speed byte/record time: 0.01912s size: 19.217M/0.095M speed: 1005.00M/4.99M
11/12/11 01:41:14 INFO Record Length: 400 read speed byte/record time: 0.03523s size: 38.290M/0.095M speed: 1086.98M/2.71M
11/12/11 01:41:16 INFO Record Length: 1000 read speed byte/record time: 0.09022s size: 95.510M/0.095M speed: 1058.69M/1.06M

[ RUN      ] Perf.LineRecordReader use system memchr
11/12/11 01:43:42 INFO Record Length: 2 read speed byte/record time: 0.00208s size: 0.334M/0.095M speed: 160.86M/45.96M
11/12/11 01:43:43 INFO Record Length: 13 read speed byte/record time: 0.00371s size: 1.383M/0.095M speed: 372.83M/25.71M
11/12/11 01:43:43 INFO Record Length: 55 read speed byte/record time: 0.00938s size: 5.388M/0.095M speed: 574.44M/10.17M
11/12/11 01:43:43 INFO Record Length: 100 read speed byte/record time: 0.01454s size: 9.680M/0.095M speed: 665.83M/6.56M
11/12/11 01:43:43 INFO Record Length: 200 read speed byte/record time: 0.02602s size: 19.217M/0.095M speed: 738.56M/3.67M
11/12/11 01:43:44 INFO Record Length: 400 read speed byte/record time: 0.04981s size: 38.290M/0.095M speed: 768.75M/1.91M


[ RUN      ] Perf.MapTask
11/12/11 19:35:08 INFO Native MemoryBlockPool: min_block_size 768K, capacity 300M
11/12/11 19:35:08 INFO prepare time time: 0.00028s
11/12/11 19:35:09 INFO Spill 0 range [0,100) record: 2500000, avg: 102.000, block: 400, size 255000202, real: 63550688, time: 1.193
11/12/11 19:35:09 INFO MapTask time: 1.77169s


memset time : 300M / 0.1466s ~ 2GB/s
page miss fault : same;

11/12/11 19:37:11 INFO Native MemoryBlockPool: min_block_size 768K, capacity 300M
11/12/11 19:37:12 INFO prepare time time: 0.14662s
11/12/11 19:37:13 INFO Spill 0 range [0,100) record: 2500000, avg: 102.000, block: 400, size 255000202, real: 63550688, time: 1.172
11/12/11 19:37:13 INFO MapTask time: 1.62748s

11/12/14 18:48:17 INFO NativeTask library initialized
11/12/14 18:48:17 INFO Native Mapper with MapOutputCollector
11/12/14 18:48:17 INFO Native MemoryBlockPool: min_block_size 768K, capacity 300M
11/12/14 18:48:18 INFO Sort all buckets time: 0.37336s
11/12/14 18:48:19 INFO Spill 0 range [0,100) record: 2500000, avg: 102.000, block: 400, size 255000200, real: 54670588, time: 0.919
11/12/14 18:48:19 INFO Map Task time: 1.45632s

decompress & read & map & collect 0.57s
sort 0.6s
ifile serializaton & compress 0.6s
local writer io 56M -> 0.61s
Total 1.75 1.35s

1G tera input 100 partition 1200m sortbuffer
11/12/29 17:01:43 INFO NativeTask library initialized
11/12/29 17:01:43 INFO Input FileSplit: hdfs://szwg-public-hadoop-b3001.szwg01.baidu.com:40010/tera200G-snappy/part-00126.snappy:0+219619173
11/12/29 17:01:43 INFO Native MemoryBlockPool: min_block_size 1024K, capacity 1200M
11/12/29 17:01:43 INFO Native Mapper with MapOutputCollector, RecordReader: NativeTask.TeraRecordReader Combiner: null Partitioner: default
11/12/29 17:01:57 INFO Spill 0 [0,100) collect: 4.394s sort: 4.700s spill: 10.280s record: 10000000, avg: 102.000, block: 1100, size 1020000200, real: 254158667

1G tera input 200 partition 1200 sortbuffer, using lz4 compression, gcc4.2-darwin
11/12/29 20:21:48 INFO NativeTask library initialized
11/12/29 20:21:48 INFO Input FileSplit: part-00000.snappy:0+219708967
11/12/29 20:21:48 INFO Native MemoryBlockPool: min_block_size 1024K, capacity 1200M
11/12/29 20:21:48 INFO Native Mapper with MapOutputCollector, RecordReader: NativeTask.TeraRecordReader Combiner: null Partitioner: default
11/12/29 20:21:55 INFO Spill 0 [0,200) collect: 2.497s sort: 2.279s spill: 5.038s record: 10000000, avg: 102.000, block: 1200, size 1020000400, real: 225893609
11/12/29 20:21:55 INFO Map Task time: 7.53625s


Processor Name: Intel Core i5
  Processor Speed:  2.3 GHz
  Number of Processors: 1
  Total Number of Cores:  2
  L2 Cache (per Core):  256 KB
  L3 Cache: 3 MB
  Memory: 4 GB

model name  : Intel(R) Xeon(R) CPU           E5645  @ 2.40GHz
stepping  : 2
cpu MHz   : 2399.961
cache size  : 12288 KB


1G tera input 200 partiton 1200m sortbuffer, using snappy compression, gcc version 3.4.5 RHEL4 Linux kerenl 2.6.9
11/12/29 17:08:14 INFO NativeTask library initialized
11/12/29 17:08:14 INFO Input FileSplit: hdfs://szwg-public-hadoop-b3001.szwg01.baidu.com:40010/tera200G-snappy/part-00006.snappy:0+219219636
11/12/29 17:08:14 INFO Native MemoryBlockPool: min_block_size 1024K, capacity 1200M
11/12/29 17:08:14 INFO Native Mapper with MapOutputCollector, RecordReader: NativeTask.TeraRecordReader Combiner: null Partitioner: default
11/12/29 17:08:28 INFO Spill 0 [0,200) collect: 4.567s sort: 3.906s spill: 9.554s record: 10000000, avg: 102.000, block: 1197, size 1020000400, real: 255306511

1G tera input 200 partition 750m sortbuffer
11/12/29 18:55:54 INFO NativeTask library initialized
11/12/29 18:55:54 INFO Input FileSplit: hdfs://szwg-public-hadoop-b3001.szwg01.baidu.com:40010/tera200G-snappy/part-00111.snappy:0+219789800
11/12/29 18:55:54 INFO Native MemoryBlockPool: min_block_size 960K, capacity 750M
11/12/29 18:55:54 INFO Native Mapper with MapOutputCollector, RecordReader: NativeTask.TeraRecordReader Combiner: null Partitioner: default
11/12/29 18:56:04 INFO Spill 0 [0,200) collect: 3.412s sort: 2.476s spill: 6.475s record: 7282656, avg: 102.000, block: 800, size 742831312, real: 186019605
11/12/29 18:56:06 INFO Sort 1 [0,200) time: 0.733
11/12/29 18:56:11 INFO Merge 2 segments: record 10000000, avg 102.000, size 1020000400, real 255289281, time 5.591


1G tera input 400 partition
11/12/29 17:12:53 INFO NativeTask library initialized
11/12/29 17:12:53 INFO Input FileSplit: hdfs://szwg-public-hadoop-b3001.szwg01.baidu.com:40010/tera200G-snappy/part-00108.snappy:0+219632682
11/12/29 17:12:53 INFO Native MemoryBlockPool: min_block_size 768K, capacity 1200M
11/12/29 17:12:53 INFO Native Mapper with MapOutputCollector, RecordReader: NativeTask.TeraRecordReader Combiner: null Partitioner: default
11/12/29 17:13:06 INFO Spill 0 [0,400) collect: 4.936s sort: 3.090s spill: 8.526s record: 10000000, avg: 102.000, block: 1600, size 1020000800, real: 256715743

1G tera input 200 partition java io.sort.mb 1400
2011-12-29 17:37:09,422 INFO org.apache.hadoop.util.NativeCodeLoader: Loaded the native-hadoop library
2011-12-29 17:37:09,464 INFO org.apache.hadoop.mapred.TaskRunner: Creating symlink: /home/disk6/hadoop/mapred/taskTracker/distcache/3891314406250704194_-1286327418_153952833/szwg-public-hadoop-b3001.szwg01.baidu.com/tera200G-snappy/_partition.lst <- /home/disk4/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0019/attempt_201112291412_0019_m_000194_0/work/_partition.lst
2011-12-29 17:37:09,470 INFO org.apache.hadoop.filecache.TrackerDistributedCacheManager: Creating symlink: /home/disk6/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0019/jars/job.jar <- /home/disk4/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0019/attempt_201112291412_0019_m_000194_0/work/job.jar
2011-12-29 17:37:09,471 INFO org.apache.hadoop.filecache.TrackerDistributedCacheManager: Creating symlink: /home/disk6/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0019/jars/.job.jar.crc <- /home/disk4/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0019/attempt_201112291412_0019_m_000194_0/work/.job.jar.crc
2011-12-29 17:37:09,472 INFO org.apache.hadoop.filecache.TrackerDistributedCacheManager: Creating symlink: /home/disk6/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0019/jars/org <- /home/disk4/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0019/attempt_201112291412_0019_m_000194_0/work/org
2011-12-29 17:37:09,473 INFO org.apache.hadoop.filecache.TrackerDistributedCacheManager: Creating symlink: /home/disk6/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0019/jars/META-INF <- /home/disk4/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0019/attempt_201112291412_0019_m_000194_0/work/META-INF
2011-12-29 17:37:09,713 INFO org.apache.hadoop.util.ProcessTree: setsid exited with exit code 0
2011-12-29 17:37:09,716 INFO org.apache.hadoop.mapred.Task:  Using ResourceCalculatorPlugin : org.apache.hadoop.util.LinuxResourceCalculatorPlugin@26a3960
2011-12-29 17:37:09,832 WARN org.apache.hadoop.io.compress.snappy.LoadSnappy: Snappy native library is available
2011-12-29 17:37:09,832 INFO org.apache.hadoop.io.compress.snappy.LoadSnappy: Snappy native library loaded
2011-12-29 17:37:09,840 INFO org.apache.hadoop.mapred.MapTask: numReduceTasks: 200
2011-12-29 17:37:09,847 INFO org.apache.hadoop.mapred.MapTask: io.sort.mb = 1400
2011-12-29 17:37:10,765 INFO org.apache.hadoop.mapred.MapTask: data buffer = 1247805440/1247805424
2011-12-29 17:37:10,765 INFO org.apache.hadoop.mapred.MapTask: record buffer = 13762561/13762561
2011-12-29 17:37:10,786 INFO org.apache.hadoop.io.compress.zlib.ZlibFactory: Successfully loaded & initialized native-zlib library
2011-12-29 17:37:10,786 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor
2011-12-29 17:37:23,005 INFO org.apache.hadoop.mapred.MapTask: Starting flush of map output
2011-12-29 17:37:47,410 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new compressor
2011-12-29 17:37:58,400 INFO org.apache.hadoop.mapred.MapTask: Finished spill 0
2011-12-29 17:37:58,402 INFO org.apache.hadoop.mapred.Task: Task:attempt_201112291412_0019_m_000194_0 is done. And is in the process of commiting
2011-12-29 17:38:01,431 INFO org.apache.hadoop.mapred.Task: Task 'attempt_201112291412_0019_m_000194_0' done.
2011-12-29 17:38:01,433 INFO org.apache.hadoop.mapred.TaskLogsTruncater: Initializing logs' truncater with mapRetainSize=-1 and reduceRetainSize=-1
2011-12-29 17:38:01,455 INFO org.apache.hadoop.io.nativeio.NativeIO: Initialized cache for UID to User mapping with a cache timeout of 14400 seconds.
2011-12-29 17:38:01,455 INFO org.apache.hadoop.io.nativeio.NativeIO: Got UserName hadoop for UID 49525 from the native implementation

io.sort.mb 750m
2011-12-29 18:50:23,801 INFO org.apache.hadoop.util.NativeCodeLoader: Loaded the native-hadoop library
2011-12-29 18:50:23,874 INFO org.apache.hadoop.mapred.TaskRunner: Creating symlink: /home/disk1/hadoop/mapred/taskTracker/distcache/-9087729446592702296_-1286327418_158402160/szwg-public-hadoop-b3001.szwg01.baidu.com/tera200G-snappy/_partition.lst <- /home/disk6/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0020/attempt_201112291412_0020_m_000033_0/work/_partition.lst
2011-12-29 18:50:23,890 INFO org.apache.hadoop.filecache.TrackerDistributedCacheManager: Creating symlink: /home/disk11/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0020/jars/META-INF <- /home/disk6/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0020/attempt_201112291412_0020_m_000033_0/work/META-INF
2011-12-29 18:50:23,902 INFO org.apache.hadoop.filecache.TrackerDistributedCacheManager: Creating symlink: /home/disk11/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0020/jars/.job.jar.crc <- /home/disk6/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0020/attempt_201112291412_0020_m_000033_0/work/.job.jar.crc
2011-12-29 18:50:23,903 INFO org.apache.hadoop.filecache.TrackerDistributedCacheManager: Creating symlink: /home/disk11/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0020/jars/job.jar <- /home/disk6/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0020/attempt_201112291412_0020_m_000033_0/work/job.jar
2011-12-29 18:50:23,904 INFO org.apache.hadoop.filecache.TrackerDistributedCacheManager: Creating symlink: /home/disk11/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0020/jars/org <- /home/disk6/hadoop/mapred/taskTracker/hadoop/jobcache/job_201112291412_0020/attempt_201112291412_0020_m_000033_0/work/org
2011-12-29 18:50:24,291 INFO org.apache.hadoop.util.ProcessTree: setsid exited with exit code 0
2011-12-29 18:50:24,303 INFO org.apache.hadoop.mapred.Task:  Using ResourceCalculatorPlugin : org.apache.hadoop.util.LinuxResourceCalculatorPlugin@60cf710e
2011-12-29 18:50:24,440 WARN org.apache.hadoop.io.compress.snappy.LoadSnappy: Snappy native library is available
2011-12-29 18:50:24,441 INFO org.apache.hadoop.io.compress.snappy.LoadSnappy: Snappy native library loaded
2011-12-29 18:50:24,448 INFO org.apache.hadoop.mapred.MapTask: numReduceTasks: 200
2011-12-29 18:50:24,457 INFO org.apache.hadoop.mapred.MapTask: io.sort.mb = 750
2011-12-29 18:50:25,002 INFO org.apache.hadoop.mapred.MapTask: data buffer = 668467200/668467200
2011-12-29 18:50:25,002 INFO org.apache.hadoop.mapred.MapTask: record buffer = 7372800/7372800
2011-12-29 18:50:25,048 INFO org.apache.hadoop.io.compress.zlib.ZlibFactory: Successfully loaded & initialized native-zlib library
2011-12-29 18:50:25,058 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new decompressor
2011-12-29 18:50:33,605 INFO org.apache.hadoop.mapred.MapTask: Spilling map output: buffer full= false
2011-12-29 18:50:33,605 INFO org.apache.hadoop.mapred.MapTask: bufstart = 0; bufend = 668467200; bufvoid = 668467200
2011-12-29 18:50:33,607 INFO org.apache.hadoop.mapred.MapTask: kvstart = 0; kvend = 6684672; length = 7372800
2011-12-29 18:50:48,506 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new compressor
2011-12-29 18:50:55,839 INFO org.apache.hadoop.mapred.MapTask: Finished spill 0
2011-12-29 18:50:59,698 INFO org.apache.hadoop.mapred.MapTask: Starting flush of map output
2011-12-29 18:51:10,140 INFO org.apache.hadoop.mapred.MapTask: Finished spill 1
2011-12-29 18:51:10,145 INFO org.apache.hadoop.mapred.Merger: Merging 2 sorted segments
....
2011-12-29 18:51:22,986 INFO org.apache.hadoop.mapred.Merger: Down to the last merge-pass, with 2 segments left of total size: 1291628 bytes
2011-12-29 18:51:23,102 INFO org.apache.hadoop.mapred.Task: Task:attempt_201112291412_0020_m_000033_0 is done. And is in the process of commiting
2011-12-29 18:51:25,293 INFO org.apache.hadoop.mapred.Task: Task 'attempt_201112291412_0020_m_000033_0' done.

Test result for Terasort
InputData 200G compressed(44G)
bin/hadoop jar hadoop-examples-1.0.1-SNAPSHOT.jar teragen 2000000000 /tera200G-snappy
map.tasks=200 mapred.output.compression.codec=Snappy

Test result for WordCount
InputData 100G compressed(52G)
bin/hadoop jar hadoop-examples-1.0.1-SNAPSHOT.jar randomtextwriter -Dtest.randomtextwrite.total_bytes=100000000000 -Dtest.randomtextwrite.bytes_per_map=500000000 -outFormat org.apache.hadoop.mapred.TextOutputFormat /text100G-snappy
map.tasks=200 mapred.output.compression.codec=Snappy

200M io.sort.mb
2011-12-30 19:22:44,309 INFO org.apache.hadoop.mapred.MapTask: io.sort.mb = 200
2011-12-30 19:22:44,480 INFO org.apache.hadoop.mapred.MapTask: data buffer = 125829120/125829120
2011-12-30 19:22:44,480 INFO org.apache.hadoop.mapred.MapTask: record buffer = 5242880/5242880
2011-12-30 19:22:44,488 WARN org.apache.hadoop.io.compress.snappy.LoadSnappy: Snappy native library is available
2011-12-30 19:22:44,488 INFO org.apache.hadoop.io.compress.snappy.LoadSnappy: Snappy native library loaded
2011-12-30 19:22:49,024 INFO org.apache.hadoop.mapred.MapTask: Spilling map output: record full = true
2011-12-30 19:22:49,024 INFO org.apache.hadoop.mapred.MapTask: bufstart = 0; bufend = 76839356; bufvoid = 125829120
2011-12-30 19:22:49,024 INFO org.apache.hadoop.mapred.MapTask: kvstart = 0; kvend = 5242879; length = 5242880
2011-12-30 19:22:54,352 INFO org.apache.hadoop.io.compress.CodecPool: Got brand-new compressor
2011-12-30 19:22:57,148 INFO org.apache.hadoop.mapred.MapTask: Finished spill 0
2011-12-30 19:23:01,610 INFO org.apache.hadoop.mapred.MapTask: Spilling map output: record full = true
2011-12-30 19:23:01,610 INFO org.apache.hadoop.mapred.MapTask: bufstart = 76839356; bufend = 27833735; bufvoid = 125829115
2011-12-30 19:23:01,610 INFO org.apache.hadoop.mapred.MapTask: kvstart = 5242879; kvend = 5242878; length = 5242880
2011-12-30 19:23:09,455 INFO org.apache.hadoop.mapred.MapTask: Finished spill 1
2011-12-30 19:23:13,617 INFO org.apache.hadoop.mapred.MapTask: Spilling map output: record full = true
2011-12-30 19:23:13,617 INFO org.apache.hadoop.mapred.MapTask: bufstart = 27833735; bufend = 104661900; bufvoid = 125829115
2011-12-30 19:23:13,617 INFO org.apache.hadoop.mapred.MapTask: kvstart = 5242878; kvend = 5242877; length = 5242880
2011-12-30 19:23:21,346 INFO org.apache.hadoop.mapred.MapTask: Finished spill 2
2011-12-30 19:23:25,474 INFO org.apache.hadoop.mapred.MapTask: Spilling map output: record full = true
2011-12-30 19:23:25,474 INFO org.apache.hadoop.mapred.MapTask: bufstart = 104661900; bufend = 55667143; bufvoid = 125829112
2011-12-30 19:23:25,474 INFO org.apache.hadoop.mapred.MapTask: kvstart = 5242877; kvend = 5242876; length = 5242880
2011-12-30 19:23:33,349 INFO org.apache.hadoop.mapred.MapTask: Finished spill 3
2011-12-30 19:23:37,484 INFO org.apache.hadoop.mapred.MapTask: Spilling map output: record full = true
2011-12-30 19:23:37,484 INFO org.apache.hadoop.mapred.MapTask: bufstart = 55667143; bufend = 6677504; bufvoid = 125829112
2011-12-30 19:23:37,484 INFO org.apache.hadoop.mapred.MapTask: kvstart = 5242876; kvend = 5242875; length = 5242880
2011-12-30 19:23:45,192 INFO org.apache.hadoop.mapred.MapTask: Finished spill 4
2011-12-30 19:23:49,401 INFO org.apache.hadoop.mapred.MapTask: Spilling map output: record full = true
2011-12-30 19:23:49,401 INFO org.apache.hadoop.mapred.MapTask: bufstart = 6677504; bufend = 83510014; bufvoid = 125829112
2011-12-30 19:23:49,401 INFO org.apache.hadoop.mapred.MapTask: kvstart = 5242875; kvend = 5242874; length = 5242880
2011-12-30 19:23:57,278 INFO org.apache.hadoop.mapred.MapTask: Finished spill 5
2011-12-30 19:24:01,367 INFO org.apache.hadoop.mapred.MapTask: Spilling map output: record full = true
2011-12-30 19:24:01,368 INFO org.apache.hadoop.mapred.MapTask: bufstart = 83510014; bufend = 34507026; bufvoid = 125829112
2011-12-30 19:24:01,368 INFO org.apache.hadoop.mapred.MapTask: kvstart = 5242874; kvend = 5242873; length = 5242880
2011-12-30 19:24:09,274 INFO org.apache.hadoop.mapred.MapTask: Finished spill 6
2011-12-30 19:24:13,444 INFO org.apache.hadoop.mapred.MapTask: Spilling map output: record full = true
2011-12-30 19:24:13,444 INFO org.apache.hadoop.mapred.MapTask: bufstart = 34507026; bufend = 111336280; bufvoid = 125829112
2011-12-30 19:24:13,444 INFO org.apache.hadoop.mapred.MapTask: kvstart = 5242873; kvend = 5242872; length = 5242880
2011-12-30 19:24:21,243 INFO org.apache.hadoop.mapred.MapTask: Finished spill 7
2011-12-30 19:24:25,133 INFO org.apache.hadoop.mapred.MapTask: Starting flush of map output
2011-12-30 19:24:32,462 INFO org.apache.hadoop.mapred.MapTask: Finished spill 8
2011-12-30 19:24:32,469 INFO org.apache.hadoop.mapred.Merger: Merging 9 sorted segments

200mb io.sort.mb
11/12/31 13:12:46 INFO NativeTask library initialized
11/12/31 13:12:46 INFO Input FileSplit: hdfs://szwg-public-hadoop-b3001.szwg01.baidu.com:40010/text100G-snappy/part-00135.snappy:0+260872679
11/12/31 13:12:46 INFO Native MemoryBlockPool: min_block_size 512K, capacity 200M
11/12/31 13:12:46 INFO Native Mapper with MapOutputCollector, RecordReader: NativeTask.LineRecordReader Combiner: NativeTask.IntSumReducer Partitioner: default
11/12/31 13:12:49 INFO Spill 0 [0,100) collect: 1.837s sort: 0.993s spill: 1.213s, record: 8534193, key: 1000, block: 400, size 17855, real: 18879
11/12/31 13:12:51 INFO Spill 1 [0,100) collect: 1.429s sort: 0.988s spill: 1.204s, record: 8543378, key: 1000, block: 400, size 17855, real: 18865
11/12/31 13:12:54 INFO Spill 2 [0,100) collect: 1.376s sort: 0.963s spill: 1.155s, record: 8515038, key: 1000, block: 400, size 17855, real: 18868
11/12/31 13:12:56 INFO Spill 3 [0,100) collect: 1.358s sort: 0.955s spill: 1.147s, record: 8527904, key: 1000, block: 400, size 17855, real: 18874
11/12/31 13:12:59 INFO Spill 4 [0,100) collect: 1.364s sort: 0.967s spill: 1.162s, record: 8526535, key: 1000, block: 400, size 17855, real: 18866
11/12/31 13:13:00 INFO Sort 5 [0,100) time: 0.465
11/12/31 13:13:00 INFO Merge 6 segments: record 0, key: 1000, size 17855, real 18968, time: 0.232



szwg-public-hadoop-b3016.szwg01.baidu.com 
